<% is_subgrid ||= false %>
<% disable_click ||= false %>
<% grid_position ||= "default" %>
<% frame_id = dom_id(mandala_item, "grid_#{grid_position}") %>
<% link_id = dom_id(mandala_item, "grid_#{grid_position}_link") %>

<%= turbo_frame_tag frame_id, class: "h-full w-full block" do %>
  <div class="h-full w-full flex items-center justify-center p-1 text-center relative hover:bg-indigo-50 transition-colors duration-200">
    <% unless disable_click %>
      <%= link_to edit_mandala_item_path(mandala_item, grid_position: grid_position), class: "absolute inset-0 w-full h-full z-50 opacity-0 block cursor-pointer", id: link_id, data: { turbo_frame: frame_id } do %>
        <span class="sr-only"><%= t('common.edit') %></span>
      <% end %>
    <% end %>


    <% if mandala_item.content.present? %>
      <%
        center_class = is_subgrid ? 'text-sm font-bold text-indigo-700' : 'text-2xl font-bold text-indigo-700'
        normal_class = is_subgrid ? 'text-xs font-medium text-gray-800' : 'text-lg font-medium text-gray-800'
      %>
      <div class="<%= mandala_item.is_center? ? center_class : normal_class %>">
        <%= mandala_item.content %>
      </div>
    <% else %>
      <div class="text-gray-300 <%= is_subgrid ? 'text-xs' : 'text-sm' %>">
        <%= t('mandala_items.empty') %>
      </div>
    <% end %>
  </div>
<% end %>
